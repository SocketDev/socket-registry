# Optional checks - can be bypassed with --no-verify for fast local commits.
# Mandatory security checks run in pre-push hook.

if [ -z "${DISABLE_PRECOMMIT_LINT}" ]; then
  pnpm lint --staged
else
  printf "Skipping lint due to DISABLE_PRECOMMIT_LINT env var\n"
fi

if [ -z "${DISABLE_PRECOMMIT_TEST}" ]; then
  NODE_COMPILE_CACHE="./.cache" PRE_COMMIT=1 pnpm test --staged
else
  printf "Skipping testing due to DISABLE_PRECOMMIT_TEST env var\n"
fi
